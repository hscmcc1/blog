---
author: hesicong
comments: true
date: 2008-12-06 16:26:40+00:00
layout: post
slug: speed-blog
title: 博客提速
wordpress_id: 791
categories:
- 生活
---

最近一些时间都在研究怎么把博客提速。我呢，本来也对网络编程方面了解的少，只好四处搜索资料，东看看西看看，然后不断的进行测试。

昨天把godaddy主机的gzip压缩搞定了。后来发现页面载入速度还是很慢，原因是http请求太多了，每一个请求的延迟200毫秒，加起来就要达到好几十秒钟了。还是很多js搞的鬼，又大载入又多。在网上看了若干wordpress优化的文章，但都没有提及js的问题，都只是说把插件关掉。天啊，关掉插件等于wordpres自宫了，还要wordpress干嘛呢？

后来装了个yslow，是firebug的一个插件，根据上面的提示说，把能够转移的js都转移到页面后端，这样能够让浏览器更快的渲染出网页。昨天晚上还没有引起注意。只是找到了大量js存在的位置。在header.php中有一句：<?php wp_head();>，这一句将会调用wordpress的一些插件，当然，其中就包含了大量的js。好吧，把这一句屏蔽掉看看效果。哇，那网页加载速度那是一个快阿！！！！

但这样做得后果很明显，所有的插件都失效了，包括后台的统计用的插件以及lightbox效果等等。那就把这一句加载到后面如何？

打开主题的文件，把<?php wp_head();>一句从header.php移动到footer.php，放在</body>之前。清空缓存，再测试一下，果然，页面打开速度很快了。页面渲染完毕以后就开始了读取最后的js，一点也不影响页面的阅读。基本上，这就达到我的目的了。

但很快，我发现，js和css并没有被缓存。我开始以为是不是放在<body>里面会影响到缓存，重新还原也是这样的。那怎么回事呢？？看看文件的http访问的header也没有发现什么异样的地方。后来想起了可能是gzip造成的。赶紧把.htaccess里面的gzip压缩的规则去掉，再看看。很好，虽然最后下载的文件大了一些，但是页面速度的到了保证，缓存也起到了效果。剩下的，就是将页面的gzip打开，关闭css、js的gzip。

这样优化一番以后，速度明显提升了，有兴趣的朋友不妨试试[yslow这个插件](https://addons.mozilla.org/zh-CN/firefox/addon/5369)。准备睡觉～晚安，周末愉快！
